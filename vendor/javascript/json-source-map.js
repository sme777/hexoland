var e={};var r={b:"\b",f:"\f",n:"\n",r:"\r",t:"\t",'"':'"',"/":"/","\\":"\\"};var t="a".charCodeAt();e.parse=function(e,a,n){var i={};var o=0;var c=0;var s=0;var u=n&&n.bigint&&"undefined"!=typeof BigInt;return{data:_parse("",true),pointers:i};function _parse(r,t){whitespace();var a;map(r,"value");var n=getChar();switch(n){case"t":read("rue");a=true;break;case"f":read("alse");a=false;break;case"n":read("ull");a=null;break;case'"':a=parseString();break;case"[":a=parseArray(r);break;case"{":a=parseObject(r);break;default:backChar();"-0123456789".indexOf(n)>=0?a=parseNumber():unexpectedToken()}map(r,"valueEnd");whitespace();t&&s<e.length&&unexpectedToken();return a}function whitespace(){e:while(s<e.length){switch(e[s]){case" ":c++;break;case"\t":c+=4;break;case"\r":c=0;break;case"\n":c=0;o++;break;default:break e}s++}}function parseString(){var e="";var t;while(true){t=getChar();if('"'==t)break;if("\\"==t){t=getChar();t in r?e+=r[t]:"u"==t?e+=getCharCode():wasUnexpectedToken()}else e+=t}return e}function parseNumber(){var r="";var t=true;"-"==e[s]&&(r+=getChar());r+="0"==e[s]?getChar():getDigits();if("."==e[s]){r+=getChar()+getDigits();t=false}if("e"==e[s]||"E"==e[s]){r+=getChar();"+"!=e[s]&&"-"!=e[s]||(r+=getChar());r+=getDigits();t=false}var a=+r;return u&&t&&(a>Number.MAX_SAFE_INTEGER||a<Number.MIN_SAFE_INTEGER)?BigInt(r):a}function parseArray(e){whitespace();var r=[];var t=0;if("]"==getChar())return r;backChar();while(true){var a=e+"/"+t;r.push(_parse(a));whitespace();var n=getChar();if("]"==n)break;","!=n&&wasUnexpectedToken();whitespace();t++}return r}function parseObject(e){whitespace();var r={};if("}"==getChar())return r;backChar();while(true){var t=getLoc();'"'!=getChar()&&wasUnexpectedToken();var a=parseString();var n=e+"/"+escapeJsonPointer(a);mapLoc(n,"key",t);map(n,"keyEnd");whitespace();":"!=getChar()&&wasUnexpectedToken();whitespace();r[a]=_parse(n);whitespace();var i=getChar();if("}"==i)break;","!=i&&wasUnexpectedToken();whitespace()}return r}function read(e){for(var r=0;r<e.length;r++)getChar()!==e[r]&&wasUnexpectedToken()}function getChar(){checkUnexpectedEnd();var r=e[s];s++;c++;return r}function backChar(){s--;c--}function getCharCode(){var e=4;var r=0;while(e--){r<<=4;var a=getChar().toLowerCase();a>="a"&&a<="f"?r+=a.charCodeAt()-t+10:a>="0"&&a<="9"?r+=+a:wasUnexpectedToken()}return String.fromCharCode(r)}function getDigits(){var r="";while(e[s]>="0"&&e[s]<="9")r+=getChar();if(r.length)return r;checkUnexpectedEnd();unexpectedToken()}function map(e,r){mapLoc(e,r,getLoc())}function mapLoc(e,r,t){i[e]=i[e]||{};i[e][r]=t}function getLoc(){return{line:o,column:c,pos:s}}function unexpectedToken(){throw new SyntaxError("Unexpected token "+e[s]+" in JSON at position "+s)}function wasUnexpectedToken(){backChar();unexpectedToken()}function checkUnexpectedEnd(){if(s>=e.length)throw new SyntaxError("Unexpected end of JSON input")}};e.stringify=function(e,r,t){if(validType(e)){var a=0;var n,i;var o="object"==typeof t?t.space:t;switch(typeof o){case"number":var c=o>10?10:o<0?0:Math.floor(o);o=c&&repeat(c," ");n=c;i=c;break;case"string":o=o.slice(0,10);n=0;i=0;for(var s=0;s<o.length;s++){var u=o[s];switch(u){case" ":i++;break;case"\t":i+=4;break;case"\r":i=0;break;case"\n":i=0;a++;break;default:throw new Error("whitespace characters not allowed in JSON")}n++}break;default:o=void 0}var p="";var f={};var v=0;var g=0;var h=0;var l=t&&t.es6&&"function"==typeof Map;_stringify(e,0,"");return{json:p,pointers:f}}function _stringify(e,r,t){map(t,"value");switch(typeof e){case"number":case"bigint":case"boolean":out(""+e);break;case"string":out(quoted(e));break;case"object":null===e?out("null"):"function"==typeof e.toJSON?out(quoted(e.toJSON())):Array.isArray(e)?stringifyArray():l?e.constructor.BYTES_PER_ELEMENT?stringifyArray():e instanceof Map?stringifyMapSet():e instanceof Set?stringifyMapSet(true):stringifyObject():stringifyObject()}map(t,"valueEnd");function stringifyArray(){if(e.length){out("[");var a=r+1;for(var n=0;n<e.length;n++){n&&out(",");indent(a);var i=validType(e[n])?e[n]:null;var o=t+"/"+n;_stringify(i,a,o)}indent(r);out("]")}else out("[]")}function stringifyObject(){var a=Object.keys(e);if(a.length){out("{");var n=r+1;for(var i=0;i<a.length;i++){var c=a[i];var s=e[c];if(validType(s)){i&&out(",");var u=t+"/"+escapeJsonPointer(c);indent(n);map(u,"key");out(quoted(c));map(u,"keyEnd");out(":");o&&out(" ");_stringify(s,n,u)}}indent(r);out("}")}else out("{}")}function stringifyMapSet(a){if(e.size){out("{");var n=r+1;var i=true;var c=e.entries();var s=c.next();while(!s.done){var u=s.value;var p=u[0];var f=!!a||u[1];if(validType(f)){i||out(",");i=false;var v=t+"/"+escapeJsonPointer(p);indent(n);map(v,"key");out(quoted(p));map(v,"keyEnd");out(":");o&&out(" ");_stringify(f,n,v)}s=c.next()}indent(r);out("}")}else out("{}")}}function out(e){g+=e.length;h+=e.length;p+=e}function indent(e){if(o){p+="\n"+repeat(e,o);v++;g=0;while(e--){if(a){v+=a;g=i}else g+=i;h+=n}h+=1}}function map(e,r){f[e]=f[e]||{};f[e][r]={line:v,column:g,pos:h}}function repeat(e,r){return Array(e+1).join(r)}};var a=["number","bigint","boolean","string","object"];function validType(e){return a.indexOf(typeof e)>=0}var n=/"|\\/g;var i=/[\b]/g;var o=/\f/g;var c=/\n/g;var s=/\r/g;var u=/\t/g;function quoted(e){e=e.replace(n,"\\$&").replace(o,"\\f").replace(i,"\\b").replace(c,"\\n").replace(s,"\\r").replace(u,"\\t");return'"'+e+'"'}var p=/~/g;var f=/\//g;function escapeJsonPointer(e){return e.replace(p,"~0").replace(f,"~1")}const v=e.parse,g=e.stringify;export default e;export{v as parse,g as stringify};

