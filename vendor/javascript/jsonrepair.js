import{c as e,i as t,e as r,a,s as n,b as s,d as i,f as c,g as o,h,j as u,k as p,l,m as d,n as f,o as C,p as A,q as m,r as w,t as g,u as S,v as b,w as k,x as N,y as W,z as E,A as y,B as x,C as O,D as v,E as K,F as U,G as j,H as I,I as J,J as V,K as q,L as B,M as D}from"../../_/lvBySqpI.js";const F={"\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t"};const z={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"};function jsonrepair(G){let H=0;let L="";const M=parseValue();M||throwUnexpectedEnd();const T=parseCharacter(e);T&&parseWhitespaceAndSkipComments();if(t(G[H])&&r(L)){T||(L=a(L,","));parseNewlineDelimitedJSON()}else T&&(L=n(L,","));while(G.charCodeAt(H)===s||G.charCodeAt(H)===i){H++;parseWhitespaceAndSkipComments()}if(H>=G.length)return L;throwUnexpectedCharacter();function parseValue(){parseWhitespaceAndSkipComments();const e=parseObject()||parseArray()||parseString()||parseNumber()||parseKeywords()||parseUnquotedString();parseWhitespaceAndSkipComments();return e}function parseWhitespaceAndSkipComments(){const e=H;let t=parseWhitespace();do{t=parseComment();t&&(t=parseWhitespace())}while(t);return H>e}function parseWhitespace(){let e="";let t;while((t=c(G.charCodeAt(H)))||o(G.charCodeAt(H))){e+=t?G[H]:" ";H++}if(e.length>0){L+=e;return true}return false}function parseComment(){if(G.charCodeAt(H)===h&&G.charCodeAt(H+1)===u){while(H<G.length&&!atEndOfBlockComment(G,H))H++;H+=2;return true}if(G.charCodeAt(H)===h&&G.charCodeAt(H+1)===h){while(H<G.length&&G.charCodeAt(H)!==p)H++;return true}return false}function parseCharacter(e){if(G.charCodeAt(H)===e){L+=G[H];H++;return true}return false}function skipCharacter(e){if(G.charCodeAt(H)===e){H++;return true}return false}function skipEscapeCharacter(){return skipCharacter(l)}function skipEllipsis(){parseWhitespaceAndSkipComments();if(G.charCodeAt(H)===d&&G.charCodeAt(H+1)===d&&G.charCodeAt(H+2)===d){H+=3;parseWhitespaceAndSkipComments();skipCharacter(e);return true}return false}function parseObject(){if(G.charCodeAt(H)===f){L+="{";H++;parseWhitespaceAndSkipComments();skipCharacter(e)&&parseWhitespaceAndSkipComments();let r=true;while(H<G.length&&G.charCodeAt(H)!==s){let c;if(r){c=true;r=false}else{c=parseCharacter(e);c||(L=a(L,","));parseWhitespaceAndSkipComments()}skipEllipsis();const o=parseString()||parseUnquotedString();if(!o){G.charCodeAt(H)===s||G.charCodeAt(H)===f||G.charCodeAt(H)===i||G.charCodeAt(H)===C||G[H]===void 0?L=n(L,","):throwObjectKeyExpected();break}parseWhitespaceAndSkipComments();const h=parseCharacter(A);const u=H>=G.length;h||(t(G[H])||u?L=a(L,":"):throwColonExpected());const p=parseValue();p||(h||u?L+="null":throwColonExpected())}if(G.charCodeAt(H)===s){L+="}";H++}else L=a(L,"}");return true}return false}function parseArray(){if(G.charCodeAt(H)===C){L+="[";H++;parseWhitespaceAndSkipComments();skipCharacter(e)&&parseWhitespaceAndSkipComments();let t=true;while(H<G.length&&G.charCodeAt(H)!==i){if(t)t=false;else{const t=parseCharacter(e);t||(L=a(L,","))}skipEllipsis();const r=parseValue();if(!r){L=n(L,",");break}}if(G.charCodeAt(H)===i){L+="]";H++}else L=a(L,"]");return true}return false}function parseNewlineDelimitedJSON(){let t=true;let r=true;while(r){if(t)t=false;else{const t=parseCharacter(e);t||(L=a(L,","))}r=parseValue()}r||(L=n(L,","));L="[\n".concat(L,"\n]")}function parseString(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];let t=G.charCodeAt(H)===l;if(t){H++;t=true}if(m(G.charCodeAt(H))){const r=w(G.charCodeAt(H))?w:g(G.charCodeAt(H))?g:S(G.charCodeAt(H))?S:b;const n=H;const s=L.length;let i='"';H++;while(true){if(H>=G.length){const t=prevNonWhitespaceIndex(H-1);if(!e&&k(G.charAt(t))){H=n;L=L.substring(0,s);return parseString(true)}i=a(i,'"');L+=i;return true}if(r(G.charCodeAt(H))){const t=H;const r=i.length;i+='"';H++;L+=i;parseWhitespaceAndSkipComments();if(e||H>=G.length||k(G.charAt(H))||m(G.charCodeAt(H))||N(G.charCodeAt(H))){parseConcatenatedString();return true}if(k(G.charAt(prevNonWhitespaceIndex(t-1)))){H=n;L=L.substring(0,s);return parseString(true)}L=L.substring(0,s);H=t+1;i=i.substring(0,r)+"\\"+i.substring(r)}else{if(e&&k(G[H])){i=a(i,'"');L+=i;parseConcatenatedString();return true}if(G.charCodeAt(H)===l){const e=G.charAt(H+1);const t=z[e];if(t!==void 0){i+=G.slice(H,H+2);H+=2}else if(e==="u"){let e=2;while(e<6&&W(G.charCodeAt(H+e)))e++;if(e===6){i+=G.slice(H,H+6);H+=6}else H+e>=G.length?H=G.length:throwInvalidUnicodeCharacter()}else{i+=e;H+=2}}else{const e=G.charAt(H);const t=G.charCodeAt(H);if(t===E&&G.charCodeAt(H-1)!==l){i+="\\"+e;H++}else if(y(t)){i+=F[e];H++}else{x(t)||throwInvalidCharacter(e);i+=e;H++}}}t&&skipEscapeCharacter()}}return false}function parseConcatenatedString(){let e=false;parseWhitespaceAndSkipComments();while(G.charCodeAt(H)===O){e=true;H++;parseWhitespaceAndSkipComments();L=n(L,'"',true);const t=L.length;const r=parseString();L=r?v(L,t,1):a(L,'"')}return e}function parseNumber(){const e=H;if(G.charCodeAt(H)===K){H++;if(atEndOfNumber()){repairNumberEndingWithNumericSymbol(e);return true}if(!N(G.charCodeAt(H))){H=e;return false}}while(N(G.charCodeAt(H)))H++;if(G.charCodeAt(H)===d){H++;if(atEndOfNumber()){repairNumberEndingWithNumericSymbol(e);return true}if(!N(G.charCodeAt(H))){H=e;return false}while(N(G.charCodeAt(H)))H++}if(G.charCodeAt(H)===U||G.charCodeAt(H)===j){H++;G.charCodeAt(H)!==K&&G.charCodeAt(H)!==O||H++;if(atEndOfNumber()){repairNumberEndingWithNumericSymbol(e);return true}if(!N(G.charCodeAt(H))){H=e;return false}while(N(G.charCodeAt(H)))H++}if(!atEndOfNumber()){H=e;return false}if(H>e){const t=G.slice(e,H);const r=/^0\d/.test(t);L+=r?'"'.concat(t,'"'):t;return true}return false}function parseKeywords(){return parseKeyword("true","true")||parseKeyword("false","false")||parseKeyword("null","null")||parseKeyword("True","true")||parseKeyword("False","false")||parseKeyword("None","null")}function parseKeyword(e,t){if(G.slice(H,H+e.length)===e){L+=t;H+=e.length;return true}return false}function parseUnquotedString(){const e=H;while(H<G.length&&!I(G[H])&&!m(G.charCodeAt(H)))H++;if(H>e){if(G.charCodeAt(H)===J&&V(G.slice(e,H).trim())){H++;parseValue();if(G.charCodeAt(H)===q){H++;G.charCodeAt(H)===B&&H++}return true}{while(c(G.charCodeAt(H-1))&&H>0)H--;const t=G.slice(e,H);L+=t==="undefined"?"null":JSON.stringify(t);G.charCodeAt(H)===E&&H++;return true}}}function prevNonWhitespaceIndex(e){let t=e;while(t>0&&c(G.charCodeAt(t)))t--;return t}function atEndOfNumber(){return H>=G.length||k(G[H])||c(G.charCodeAt(H))}function repairNumberEndingWithNumericSymbol(e){L+=G.slice(e,H)+"0"}function throwInvalidCharacter(e){throw new D("Invalid character "+JSON.stringify(e),H)}function throwUnexpectedCharacter(){throw new D("Unexpected character "+JSON.stringify(G[H]),H)}function throwUnexpectedEnd(){throw new D("Unexpected end of json string",G.length)}function throwObjectKeyExpected(){throw new D("Object key expected",H)}function throwColonExpected(){throw new D("Colon expected",H)}function throwInvalidUnicodeCharacter(){const e=G.slice(H,H+6);throw new D('Invalid unicode character "'.concat(e,'"'),H)}}function atEndOfBlockComment(e,t){return e[t]==="*"&&e[t+1]==="/"}export{D as JSONRepairError,jsonrepair};

