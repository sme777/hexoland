var e="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global;var t={};(function(t){function isArray(e){return null!==e&&"[object Array]"===Object.prototype.toString.call(e)}function isObject(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function strictDeepEqual(e,t){if(e===t)return true;var r=Object.prototype.toString.call(e);if(r!==Object.prototype.toString.call(t))return false;if(true===isArray(e)){if(e.length!==t.length)return false;for(var n=0;n<e.length;n++)if(false===strictDeepEqual(e[n],t[n]))return false;return true}if(true===isObject(e)){var i={};for(var a in e)if(hasOwnProperty.call(e,a)){if(false===strictDeepEqual(e[a],t[a]))return false;i[a]=true}for(var s in t)if(hasOwnProperty.call(t,s)&&true!==i[s])return false;return true}return false}function isFalse(e){if(""===e||false===e||null===e)return true;if(isArray(e)&&0===e.length)return true;if(isObject(e)){for(var t in e)if(e.hasOwnProperty(t))return false;return true}return false}function objValues(e){var t=Object.keys(e);var r=[];for(var n=0;n<t.length;n++)r.push(e[t[n]]);return r}var r;r="function"===typeof String.prototype.trimLeft?function(e){return e.trimLeft()}:function(e){return e.match(/^\s*(.*)/)[1]};var n=0;var i=1;var a=2;var s=3;var u=4;var o=5;var c=6;var h=7;var l=8;var f=9;var _={0:"number",1:"any",2:"string",3:"array",4:"object",5:"boolean",6:"expression",7:"null",8:"Array<number>",9:"Array<string>"};var v="EOF";var p="UnquotedIdentifier";var y="QuotedIdentifier";var d="Rbracket";var g="Rparen";var m="Comma";var k="Colon";var x="Rbrace";var w="Number";var b="Current";var E="Expref";var S="Pipe";var T="Or";var j="And";var N="EQ";var O="GT";var P="LT";var I="GTE";var A="LTE";var M="NE";var L="Flatten";var R="Star";var F="Filter";var H="Dot";var C="Not";var D="Lbrace";var q="Lbracket";var z="Lparen";var B="Literal";var J={".":H,"*":R,",":m,":":k,"{":D,"}":x,"]":d,"(":z,")":g,"@":b};var U={"<":true,">":true,"=":true,"!":true};var V={" ":true,"\t":true,"\n":true};function isAlpha(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"||"_"===e}function isNum(e){return e>="0"&&e<="9"||"-"===e}function isAlphaNum(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"||e>="0"&&e<="9"||"_"===e}function Lexer(){}Lexer.prototype={tokenize:function(t){var r=[];(this||e)._current=0;var n;var i;var a;while((this||e)._current<t.length)if(isAlpha(t[(this||e)._current])){n=(this||e)._current;i=this._consumeUnquotedIdentifier(t);r.push({type:p,value:i,start:n})}else if(void 0!==J[t[(this||e)._current]]){r.push({type:J[t[(this||e)._current]],value:t[(this||e)._current],start:(this||e)._current});(this||e)._current++}else if(isNum(t[(this||e)._current])){a=this._consumeNumber(t);r.push(a)}else if("["===t[(this||e)._current]){a=this._consumeLBracket(t);r.push(a)}else if('"'===t[(this||e)._current]){n=(this||e)._current;i=this._consumeQuotedIdentifier(t);r.push({type:y,value:i,start:n})}else if("'"===t[(this||e)._current]){n=(this||e)._current;i=this._consumeRawStringLiteral(t);r.push({type:B,value:i,start:n})}else if("`"===t[(this||e)._current]){n=(this||e)._current;var s=this._consumeLiteral(t);r.push({type:B,value:s,start:n})}else if(void 0!==U[t[(this||e)._current]])r.push(this._consumeOperator(t));else if(void 0!==V[t[(this||e)._current]])(this||e)._current++;else if("&"===t[(this||e)._current]){n=(this||e)._current;(this||e)._current++;if("&"===t[(this||e)._current]){(this||e)._current++;r.push({type:j,value:"&&",start:n})}else r.push({type:E,value:"&",start:n})}else{if("|"!==t[(this||e)._current]){var u=new Error("Unknown character:"+t[(this||e)._current]);u.name="LexerError";throw u}n=(this||e)._current;(this||e)._current++;if("|"===t[(this||e)._current]){(this||e)._current++;r.push({type:T,value:"||",start:n})}else r.push({type:S,value:"|",start:n})}return r},_consumeUnquotedIdentifier:function(t){var r=(this||e)._current;(this||e)._current++;while((this||e)._current<t.length&&isAlphaNum(t[(this||e)._current]))(this||e)._current++;return t.slice(r,(this||e)._current)},_consumeQuotedIdentifier:function(t){var r=(this||e)._current;(this||e)._current++;var n=t.length;while('"'!==t[(this||e)._current]&&(this||e)._current<n){var i=(this||e)._current;"\\"!==t[i]||"\\"!==t[i+1]&&'"'!==t[i+1]?i++:i+=2;(this||e)._current=i}(this||e)._current++;return JSON.parse(t.slice(r,(this||e)._current))},_consumeRawStringLiteral:function(t){var r=(this||e)._current;(this||e)._current++;var n=t.length;while("'"!==t[(this||e)._current]&&(this||e)._current<n){var i=(this||e)._current;"\\"!==t[i]||"\\"!==t[i+1]&&"'"!==t[i+1]?i++:i+=2;(this||e)._current=i}(this||e)._current++;var a=t.slice(r+1,(this||e)._current-1);return a.replace("\\'","'")},_consumeNumber:function(t){var r=(this||e)._current;(this||e)._current++;var n=t.length;while(isNum(t[(this||e)._current])&&(this||e)._current<n)(this||e)._current++;var i=parseInt(t.slice(r,(this||e)._current));return{type:w,value:i,start:r}},_consumeLBracket:function(t){var r=(this||e)._current;(this||e)._current++;if("?"===t[(this||e)._current]){(this||e)._current++;return{type:F,value:"[?",start:r}}if("]"===t[(this||e)._current]){(this||e)._current++;return{type:L,value:"[]",start:r}}return{type:q,value:"[",start:r}},_consumeOperator:function(t){var r=(this||e)._current;var n=t[r];(this||e)._current++;if("!"===n){if("="===t[(this||e)._current]){(this||e)._current++;return{type:M,value:"!=",start:r}}return{type:C,value:"!",start:r}}if("<"===n){if("="===t[(this||e)._current]){(this||e)._current++;return{type:A,value:"<=",start:r}}return{type:P,value:"<",start:r}}if(">"===n){if("="===t[(this||e)._current]){(this||e)._current++;return{type:I,value:">=",start:r}}return{type:O,value:">",start:r}}if("="===n&&"="===t[(this||e)._current]){(this||e)._current++;return{type:N,value:"==",start:r}}},_consumeLiteral:function(t){(this||e)._current++;var n=(this||e)._current;var i=t.length;var a;while("`"!==t[(this||e)._current]&&(this||e)._current<i){var s=(this||e)._current;"\\"!==t[s]||"\\"!==t[s+1]&&"`"!==t[s+1]?s++:s+=2;(this||e)._current=s}var u=r(t.slice(n,(this||e)._current));u=u.replace("\\`","`");a=this._looksLikeJSON(u)?JSON.parse(u):JSON.parse('"'+u+'"');(this||e)._current++;return a},_looksLikeJSON:function(e){var t='[{"';var r=["true","false","null"];var n="-0123456789";if(""===e)return false;if(t.indexOf(e[0])>=0)return true;if(r.indexOf(e)>=0)return true;if(!(n.indexOf(e[0])>=0))return false;try{JSON.parse(e);return true}catch(e){return false}}};var K={};K[v]=0;K[p]=0;K[y]=0;K[d]=0;K[g]=0;K[m]=0;K[x]=0;K[w]=0;K[b]=0;K[E]=0;K[S]=1;K[T]=2;K[j]=3;K[N]=5;K[O]=5;K[P]=5;K[I]=5;K[A]=5;K[M]=5;K[L]=9;K[R]=20;K[F]=21;K[H]=40;K[C]=45;K[D]=50;K[q]=55;K[z]=60;function Parser(){}Parser.prototype={parse:function(t){this._loadTokens(t);(this||e).index=0;var r=this.expression(0);if(this._lookahead(0)!==v){var n=this._lookaheadToken(0);var i=new Error("Unexpected token type: "+n.type+", value: "+n.value);i.name="ParserError";throw i}return r},_loadTokens:function(t){var r=new Lexer;var n=r.tokenize(t);n.push({type:v,value:"",start:t.length});(this||e).tokens=n},expression:function(e){var t=this._lookaheadToken(0);this._advance();var r=this.nud(t);var n=this._lookahead(0);while(e<K[n]){this._advance();r=this.led(n,r);n=this._lookahead(0)}return r},_lookahead:function(t){return(this||e).tokens[(this||e).index+t].type},_lookaheadToken:function(t){return(this||e).tokens[(this||e).index+t]},_advance:function(){(this||e).index++},nud:function(e){var t;var r;var n;switch(e.type){case B:return{type:"Literal",value:e.value};case p:return{type:"Field",name:e.value};case y:var i={type:"Field",name:e.value};if(this._lookahead(0)===z)throw new Error("Quoted identifier not allowed for function names.");return i;case C:r=this.expression(K.Not);return{type:"NotExpression",children:[r]};case R:t={type:"Identity"};r=null;r=this._lookahead(0)===d?{type:"Identity"}:this._parseProjectionRHS(K.Star);return{type:"ValueProjection",children:[t,r]};case F:return this.led(e.type,{type:"Identity"});case D:return this._parseMultiselectHash();case L:t={type:L,children:[{type:"Identity"}]};r=this._parseProjectionRHS(K.Flatten);return{type:"Projection",children:[t,r]};case q:if(this._lookahead(0)===w||this._lookahead(0)===k){r=this._parseIndexExpression();return this._projectIfSlice({type:"Identity"},r)}if(this._lookahead(0)===R&&this._lookahead(1)===d){this._advance();this._advance();r=this._parseProjectionRHS(K.Star);return{type:"Projection",children:[{type:"Identity"},r]}}return this._parseMultiselectList();case b:return{type:b};case E:n=this.expression(K.Expref);return{type:"ExpressionReference",children:[n]};case z:var a=[];while(this._lookahead(0)!==g){if(this._lookahead(0)===b){n={type:b};this._advance()}else n=this.expression(0);a.push(n)}this._match(g);return a[0];default:this._errorToken(e)}},led:function(e,t){var r;switch(e){case H:var n=K.Dot;if(this._lookahead(0)!==R){r=this._parseDotRHS(n);return{type:"Subexpression",children:[t,r]}}this._advance();r=this._parseProjectionRHS(n);return{type:"ValueProjection",children:[t,r]};case S:r=this.expression(K.Pipe);return{type:S,children:[t,r]};case T:r=this.expression(K.Or);return{type:"OrExpression",children:[t,r]};case j:r=this.expression(K.And);return{type:"AndExpression",children:[t,r]};case z:var i=t.name;var a=[];var s,u;while(this._lookahead(0)!==g){if(this._lookahead(0)===b){s={type:b};this._advance()}else s=this.expression(0);this._lookahead(0)===m&&this._match(m);a.push(s)}this._match(g);u={type:"Function",name:i,children:a};return u;case F:var o=this.expression(0);this._match(d);r=this._lookahead(0)===L?{type:"Identity"}:this._parseProjectionRHS(K.Filter);return{type:"FilterProjection",children:[t,r,o]};case L:var c={type:L,children:[t]};var h=this._parseProjectionRHS(K.Flatten);return{type:"Projection",children:[c,h]};case N:case M:case O:case I:case P:case A:return this._parseComparator(t,e);case q:var l=this._lookaheadToken(0);if(l.type===w||l.type===k){r=this._parseIndexExpression();return this._projectIfSlice(t,r)}this._match(R);this._match(d);r=this._parseProjectionRHS(K.Star);return{type:"Projection",children:[t,r]};default:this._errorToken(this._lookaheadToken(0))}},_match:function(e){if(this._lookahead(0)!==e){var t=this._lookaheadToken(0);var r=new Error("Expected "+e+", got: "+t.type);r.name="ParserError";throw r}this._advance()},_errorToken:function(e){var t=new Error("Invalid token ("+e.type+'): "'+e.value+'"');t.name="ParserError";throw t},_parseIndexExpression:function(){if(this._lookahead(0)===k||this._lookahead(1)===k)return this._parseSliceExpression();var e={type:"Index",value:this._lookaheadToken(0).value};this._advance();this._match(d);return e},_projectIfSlice:function(e,t){var r={type:"IndexExpression",children:[e,t]};return"Slice"===t.type?{type:"Projection",children:[r,this._parseProjectionRHS(K.Star)]}:r},_parseSliceExpression:function(){var e=[null,null,null];var t=0;var r=this._lookahead(0);while(r!==d&&t<3){if(r===k){t++;this._advance()}else{if(r!==w){var n=this._lookahead(0);var i=new Error("Syntax error, unexpected token: "+n.value+"("+n.type+")");i.name="Parsererror";throw i}e[t]=this._lookaheadToken(0).value;this._advance()}r=this._lookahead(0)}this._match(d);return{type:"Slice",children:e}},_parseComparator:function(e,t){var r=this.expression(K[t]);return{type:"Comparator",name:t,children:[e,r]}},_parseDotRHS:function(e){var t=this._lookahead(0);var r=[p,y,R];if(r.indexOf(t)>=0)return this.expression(e);if(t===q){this._match(q);return this._parseMultiselectList()}if(t===D){this._match(D);return this._parseMultiselectHash()}},_parseProjectionRHS:function(e){var t;if(K[this._lookahead(0)]<10)t={type:"Identity"};else if(this._lookahead(0)===q)t=this.expression(e);else if(this._lookahead(0)===F)t=this.expression(e);else{if(this._lookahead(0)!==H){var r=this._lookaheadToken(0);var n=new Error("Sytanx error, unexpected token: "+r.value+"("+r.type+")");n.name="ParserError";throw n}this._match(H);t=this._parseDotRHS(e)}return t},_parseMultiselectList:function(){var e=[];while(this._lookahead(0)!==d){var t=this.expression(0);e.push(t);if(this._lookahead(0)===m){this._match(m);if(this._lookahead(0)===d)throw new Error("Unexpected token Rbracket")}}this._match(d);return{type:"MultiSelectList",children:e}},_parseMultiselectHash:function(){var e=[];var t=[p,y];var r,n,i,a;for(;;){r=this._lookaheadToken(0);if(t.indexOf(r.type)<0)throw new Error("Expecting an identifier token, got: "+r.type);n=r.value;this._advance();this._match(k);i=this.expression(0);a={type:"KeyValuePair",name:n,value:i};e.push(a);if(this._lookahead(0)===m)this._match(m);else if(this._lookahead(0)===x){this._match(x);break}}return{type:"MultiSelectHash",children:e}}};function TreeInterpreter(t){(this||e).runtime=t}TreeInterpreter.prototype={search:function(e,t){return this.visit(e,t)},visit:function(t,r){var n,i,a,s,u,o,c,h,l,f;switch(t.type){case"Field":if(null!==r&&isObject(r)){o=r[t.name];return void 0===o?null:o}return null;case"Subexpression":a=this.visit(t.children[0],r);for(f=1;f<t.children.length;f++){a=this.visit(t.children[1],a);if(null===a)return null}return a;case"IndexExpression":c=this.visit(t.children[0],r);h=this.visit(t.children[1],c);return h;case"Index":if(!isArray(r))return null;var _=t.value;_<0&&(_=r.length+_);a=r[_];void 0===a&&(a=null);return a;case"Slice":if(!isArray(r))return null;var v=t.children.slice(0);var p=this.computeSliceParams(r.length,v);var y=p[0];var d=p[1];var g=p[2];a=[];if(g>0)for(f=y;f<d;f+=g)a.push(r[f]);else for(f=y;f>d;f+=g)a.push(r[f]);return a;case"Projection":var m=this.visit(t.children[0],r);if(!isArray(m))return null;l=[];for(f=0;f<m.length;f++){i=this.visit(t.children[1],m[f]);null!==i&&l.push(i)}return l;case"ValueProjection":m=this.visit(t.children[0],r);if(!isObject(m))return null;l=[];var k=objValues(m);for(f=0;f<k.length;f++){i=this.visit(t.children[1],k[f]);null!==i&&l.push(i)}return l;case"FilterProjection":m=this.visit(t.children[0],r);if(!isArray(m))return null;var x=[];var w=[];for(f=0;f<m.length;f++){n=this.visit(t.children[2],m[f]);isFalse(n)||x.push(m[f])}for(var T=0;T<x.length;T++){i=this.visit(t.children[1],x[T]);null!==i&&w.push(i)}return w;case"Comparator":s=this.visit(t.children[0],r);u=this.visit(t.children[1],r);switch(t.name){case N:a=strictDeepEqual(s,u);break;case M:a=!strictDeepEqual(s,u);break;case O:a=s>u;break;case I:a=s>=u;break;case P:a=s<u;break;case A:a=s<=u;break;default:throw new Error("Unknown comparator: "+t.name)}return a;case L:var j=this.visit(t.children[0],r);if(!isArray(j))return null;var R=[];for(f=0;f<j.length;f++){i=j[f];isArray(i)?R.push.apply(R,i):R.push(i)}return R;case"Identity":return r;case"MultiSelectList":if(null===r)return null;l=[];for(f=0;f<t.children.length;f++)l.push(this.visit(t.children[f],r));return l;case"MultiSelectHash":if(null===r)return null;l={};var F;for(f=0;f<t.children.length;f++){F=t.children[f];l[F.name]=this.visit(F.value,r)}return l;case"OrExpression":n=this.visit(t.children[0],r);isFalse(n)&&(n=this.visit(t.children[1],r));return n;case"AndExpression":s=this.visit(t.children[0],r);return true===isFalse(s)?s:this.visit(t.children[1],r);case"NotExpression":s=this.visit(t.children[0],r);return isFalse(s);case"Literal":return t.value;case S:c=this.visit(t.children[0],r);return this.visit(t.children[1],c);case b:return r;case"Function":var H=[];for(f=0;f<t.children.length;f++)H.push(this.visit(t.children[f],r));return(this||e).runtime.callFunction(t.name,H);case"ExpressionReference":var C=t.children[0];C.jmespathType=E;return C;default:throw new Error("Unknown node type: "+t.type)}},computeSliceParams:function(e,t){var r=t[0];var n=t[1];var i=t[2];var a=[null,null,null];if(null===i)i=1;else if(0===i){var s=new Error("Invalid slice, step cannot be 0");s.name="RuntimeError";throw s}var u=i<0;r=null===r?u?e-1:0:this.capSliceRange(e,r,i);n=null===n?u?-1:e:this.capSliceRange(e,n,i);a[0]=r;a[1]=n;a[2]=i;return a},capSliceRange:function(e,t,r){if(t<0){t+=e;t<0&&(t=r<0?-1:0)}else t>=e&&(t=r<0?e-1:e);return t}};function Runtime(t){(this||e)._interpreter=t;(this||e).functionTable={abs:{_func:(this||e)._functionAbs,_signature:[{types:[n]}]},avg:{_func:(this||e)._functionAvg,_signature:[{types:[l]}]},ceil:{_func:(this||e)._functionCeil,_signature:[{types:[n]}]},contains:{_func:(this||e)._functionContains,_signature:[{types:[a,s]},{types:[i]}]},ends_with:{_func:(this||e)._functionEndsWith,_signature:[{types:[a]},{types:[a]}]},floor:{_func:(this||e)._functionFloor,_signature:[{types:[n]}]},length:{_func:(this||e)._functionLength,_signature:[{types:[a,s,u]}]},map:{_func:(this||e)._functionMap,_signature:[{types:[c]},{types:[s]}]},max:{_func:(this||e)._functionMax,_signature:[{types:[l,f]}]},merge:{_func:(this||e)._functionMerge,_signature:[{types:[u],variadic:true}]},max_by:{_func:(this||e)._functionMaxBy,_signature:[{types:[s]},{types:[c]}]},sum:{_func:(this||e)._functionSum,_signature:[{types:[l]}]},starts_with:{_func:(this||e)._functionStartsWith,_signature:[{types:[a]},{types:[a]}]},min:{_func:(this||e)._functionMin,_signature:[{types:[l,f]}]},min_by:{_func:(this||e)._functionMinBy,_signature:[{types:[s]},{types:[c]}]},type:{_func:(this||e)._functionType,_signature:[{types:[i]}]},keys:{_func:(this||e)._functionKeys,_signature:[{types:[u]}]},values:{_func:(this||e)._functionValues,_signature:[{types:[u]}]},sort:{_func:(this||e)._functionSort,_signature:[{types:[f,l]}]},sort_by:{_func:(this||e)._functionSortBy,_signature:[{types:[s]},{types:[c]}]},join:{_func:(this||e)._functionJoin,_signature:[{types:[a]},{types:[f]}]},reverse:{_func:(this||e)._functionReverse,_signature:[{types:[a,s]}]},to_array:{_func:(this||e)._functionToArray,_signature:[{types:[i]}]},to_string:{_func:(this||e)._functionToString,_signature:[{types:[i]}]},to_number:{_func:(this||e)._functionToNumber,_signature:[{types:[i]}]},not_null:{_func:(this||e)._functionNotNull,_signature:[{types:[i],variadic:true}]}}}Runtime.prototype={callFunction:function(t,r){var n=(this||e).functionTable[t];if(void 0===n)throw new Error("Unknown function: "+t+"()");this._validateArgs(t,r,n._signature);return n._func.call(this||e,r)},_validateArgs:function(e,t,r){var n;if(r[r.length-1].variadic){if(t.length<r.length){n=1===r.length?" argument":" arguments";throw new Error("ArgumentError: "+e+"() takes at least"+r.length+n+" but received "+t.length)}}else if(t.length!==r.length){n=1===r.length?" argument":" arguments";throw new Error("ArgumentError: "+e+"() takes "+r.length+n+" but received "+t.length)}var i;var a;var s;for(var u=0;u<r.length;u++){s=false;i=r[u].types;a=this._getTypeName(t[u]);for(var o=0;o<i.length;o++)if(this._typeMatches(a,i[o],t[u])){s=true;break}if(!s){var c=i.map((function(e){return _[e]})).join(",");throw new Error("TypeError: "+e+"() expected argument "+(u+1)+" to be type "+c+" but received type "+_[a]+" instead.")}}},_typeMatches:function(e,t,r){if(t===i)return true;if(t!==f&&t!==l&&t!==s)return e===t;if(t===s)return e===s;if(e===s){var u;t===l?u=n:t===f&&(u=a);for(var o=0;o<r.length;o++)if(!this._typeMatches(this._getTypeName(r[o]),u,r[o]))return false;return true}},_getTypeName:function(e){switch(Object.prototype.toString.call(e)){case"[object String]":return a;case"[object Number]":return n;case"[object Array]":return s;case"[object Boolean]":return o;case"[object Null]":return h;case"[object Object]":return e.jmespathType===E?c:u}},_functionStartsWith:function(e){return 0===e[0].lastIndexOf(e[1])},_functionEndsWith:function(e){var t=e[0];var r=e[1];return-1!==t.indexOf(r,t.length-r.length)},_functionReverse:function(e){var t=this._getTypeName(e[0]);if(t===a){var r=e[0];var n="";for(var i=r.length-1;i>=0;i--)n+=r[i];return n}var s=e[0].slice(0);s.reverse();return s},_functionAbs:function(e){return Math.abs(e[0])},_functionCeil:function(e){return Math.ceil(e[0])},_functionAvg:function(e){var t=0;var r=e[0];for(var n=0;n<r.length;n++)t+=r[n];return t/r.length},_functionContains:function(e){return e[0].indexOf(e[1])>=0},_functionFloor:function(e){return Math.floor(e[0])},_functionLength:function(e){return isObject(e[0])?Object.keys(e[0]).length:e[0].length},_functionMap:function(t){var r=[];var n=(this||e)._interpreter;var i=t[0];var a=t[1];for(var s=0;s<a.length;s++)r.push(n.visit(i,a[s]));return r},_functionMerge:function(e){var t={};for(var r=0;r<e.length;r++){var n=e[r];for(var i in n)t[i]=n[i]}return t},_functionMax:function(e){if(e[0].length>0){var t=this._getTypeName(e[0][0]);if(t===n)return Math.max.apply(Math,e[0]);var r=e[0];var i=r[0];for(var a=1;a<r.length;a++)i.localeCompare(r[a])<0&&(i=r[a]);return i}return null},_functionMin:function(e){if(e[0].length>0){var t=this._getTypeName(e[0][0]);if(t===n)return Math.min.apply(Math,e[0]);var r=e[0];var i=r[0];for(var a=1;a<r.length;a++)r[a].localeCompare(i)<0&&(i=r[a]);return i}return null},_functionSum:function(e){var t=0;var r=e[0];for(var n=0;n<r.length;n++)t+=r[n];return t},_functionType:function(e){switch(this._getTypeName(e[0])){case n:return"number";case a:return"string";case s:return"array";case u:return"object";case o:return"boolean";case c:return"expref";case h:return"null"}},_functionKeys:function(e){return Object.keys(e[0])},_functionValues:function(e){var t=e[0];var r=Object.keys(t);var n=[];for(var i=0;i<r.length;i++)n.push(t[r[i]]);return n},_functionJoin:function(e){var t=e[0];var r=e[1];return r.join(t)},_functionToArray:function(e){return this._getTypeName(e[0])===s?e[0]:[e[0]]},_functionToString:function(e){return this._getTypeName(e[0])===a?e[0]:JSON.stringify(e[0])},_functionToNumber:function(e){var t=this._getTypeName(e[0]);var r;if(t===n)return e[0];if(t===a){r=+e[0];if(!isNaN(r))return r}return null},_functionNotNull:function(e){for(var t=0;t<e.length;t++)if(this._getTypeName(e[t])!==h)return e[t];return null},_functionSort:function(e){var t=e[0].slice(0);t.sort();return t},_functionSortBy:function(t){var r=t[0].slice(0);if(0===r.length)return r;var i=(this||e)._interpreter;var s=t[1];var u=this._getTypeName(i.visit(s,r[0]));if([n,a].indexOf(u)<0)throw new Error("TypeError");var o=this||e;var c=[];for(var h=0;h<r.length;h++)c.push([h,r[h]]);c.sort((function(e,t){var r=i.visit(s,e[1]);var n=i.visit(s,t[1]);if(o._getTypeName(r)!==u)throw new Error("TypeError: expected "+u+", received "+o._getTypeName(r));if(o._getTypeName(n)!==u)throw new Error("TypeError: expected "+u+", received "+o._getTypeName(n));return r>n?1:r<n?-1:e[0]-t[0]}));for(var l=0;l<c.length;l++)r[l]=c[l][1];return r},_functionMaxBy:function(e){var t=e[1];var r=e[0];var i=this.createKeyFunction(t,[n,a]);var s=-Infinity;var u;var o;for(var c=0;c<r.length;c++){o=i(r[c]);if(o>s){s=o;u=r[c]}}return u},_functionMinBy:function(e){var t=e[1];var r=e[0];var i=this.createKeyFunction(t,[n,a]);var s=Infinity;var u;var o;for(var c=0;c<r.length;c++){o=i(r[c]);if(o<s){s=o;u=r[c]}}return u},createKeyFunction:function(t,r){var n=this||e;var i=(this||e)._interpreter;var keyFunc=function(e){var a=i.visit(t,e);if(r.indexOf(n._getTypeName(a))<0){var s="TypeError: expected one of "+r+", received "+n._getTypeName(a);throw new Error(s)}return a};return keyFunc}};function compile(e){var t=new Parser;var r=t.parse(e);return r}function tokenize(e){var t=new Lexer;return t.tokenize(e)}function search(e,t){var r=new Parser;var n=new Runtime;var i=new TreeInterpreter(n);n._interpreter=i;var a=r.parse(t);return i.search(a,e)}t.tokenize=tokenize;t.compile=compile;t.search=search;t.strictDeepEqual=strictDeepEqual})(t);const r=t.tokenize,n=t.compile,i=t.search,a=t.strictDeepEqual;export{n as compile,t as default,i as search,a as strictDeepEqual,r as tokenize};

